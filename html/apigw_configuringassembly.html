<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2017" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2017" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Creating an assembly" />
<meta name="abstract" content="An assembly defines the data processing capabilities of an API definition. When an API is matched for an API request, the API execute action in the API processing rule runs the assembly of the API to respond to the request. The information instructs how to create an assembly." />
<meta name="Description" content="An assembly defines the data processing capabilities of an API definition. When an API is matched for an API request, the API execute action in the API processing rule runs the assembly of the API to respond to the request. The information instructs how to create an assembly." />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiexecute.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiresult.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_configuringapi.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addinggatewayscriptaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingifaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addinginvokeaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingparseaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingsetvariableaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingswitchaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingthrowaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingxmltojsonaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingvalidatejwtaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_addingxsltaction.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_referencingapicontextvariable.html" />
<meta name="DC.Date" scheme="iso8601" content="2017-05-11" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="apigw_configuringassembly" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="./ibmdita.css" />
<link rel="Start" href="apigw_configuringapi.html" />
<title>Creating an assembly</title>
</head>
<body id="apigw_configuringassembly"><div role="main">
<h1 class="title topictitle1">Creating an assembly<span class="ph"><img src="./7.6.0.gif" alt="7.6.0" /><img src="./end.gif" alt="" /></span></h1>
<div class="body taskbody"><p class="shortdesc">An assembly defines the data processing capabilities of an API definition. When an API is
matched for an API request, the API execute action in the API processing rule runs the assembly of
the API to respond to the request. The information instructs how to create an assembly.</p>
<div class="section context"><div class="tasklabel"><h2 class="sectiontitle tasklabel" id="taskd9595e19">About this task</h2></div><p class="p">To configure an assembly, you must define the assembly rule and optionally how to handle errors
that occur during the assembly execution.</p>

<p class="p">An assembly rule can comprise one or more assembly actions to apply to the API call. The assembly
actions are run in order and act on different context variables of the API call. You can access and
manipulate the variables in the API context by referencing the context variable in the assembly
action configuration.</p>

<p class="p">You can define catch settings to handle specific errors such as the assembly invoke action fails
to connect the server or receives a non-200 message, or the assembly switch action fails to evaluate
the given expression. Unhandled errors are saved for preparing the final response, for more
information, see the response preparation topic.</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel" id="taskd9595e28">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">In the search field, enter <kbd class="ph userinput">API</kbd>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">From the search results, select <span class="ph uicontrol">Assembly</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Add</span> or <span class="ph uicontrol">New</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Define the basic properties: Name, administrative state, and descriptive summary.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Specify the assembly rule that consists of  one or more assembly actions to apply to the API
call.</span></li>
<li class="li step stepexpand">Optional: <span class="ph cmd">Specify a catch setting that defines how to handle a specific error in the assembly.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">Add</span> or <span class="ph uicontrol">New</span>.</span></li>
<li class="li substep"><span class="ph cmd">Enter the name of the error.</span></li>
<li class="li substep"><span class="ph cmd">Specify an error handler.</span></li>
<li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">Apply</span>.</span></li>
<li class="li substep">Optional: <span class="ph cmd">Repeat the previous steps to add another error case.</span></li>
</ol>
</li>
<li class="li step stepexpand">Optional: <span class="ph cmd">Specify a default error rule to run when an uncaught error occurs.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Apply</span> to save the changes to the running configuration.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Save Configuration</span> or <span class="ph uicontrol">Save changes</span> to save
the changes to the persisted configuration.</span></li>
</ol>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addinggatewayscriptaction.html">Adding a GatewayScript action</a></span><br />
Add a <span class="ph">GatewayScript</span> action to the assembly. The
<span class="ph">GatewayScript</span> action uses a specified <span class="ph">GatewayScript</span> file in a directory on the <span class="ph">DataPower Gateway</span>. </li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingifaction.html">Adding an If action</a></span><br />
How to add an assembly If action.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addinginvokeaction.html">Adding an invoke action to retrieve documents</a></span><br />
An invoke action retrieves a document from a specified target URL from within the
assembly. The invoke action sends a request that can include a payload to the target and stores the
response in the specified variable in the API context.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingparseaction.html">Adding a parse action to the assembly</a></span><br />
An assembly parse action controls the parsing of an input document which can be an XML or
JSON document, or binary data from the API context. When a parse action is configured for an
assembly rule, the parse settings that are associated with the parse action override the
corresponding parser limits for input documents that are set by the XML manager.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingsetvariableaction.html">Adding a set variable action</a></span><br />
You can add an assembly set variable action to set, add, or clear the variables in the
API context. </li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingswitchaction.html">Adding a switch action to choose which rule to use</a></span><br />
An assembly switch action evaluates the input context against a list of conditions and
runs the corresponding API rule of the first condition that matches. Provide conditions with
JavaScript expression and use an <span class="q">"otherwise"</span> clause to run a designated rule when no condition
matches.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingthrowaction.html">Adding a throw action for a custom error message</a></span><br />
A throw action throws a custom error. This action ends the current assembly
rule.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingxmltojsonaction.html">Adding a convert XML to JSON action</a></span><br />
An XML to JSON action converts the payload of an API context from the extensible markup
language (XML) format to JavaScript Object Notation (JSON) object.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingvalidatejwtaction.html">Adding a validate JWT action</a></span><br />
A validate JWT action defines the cryptographic material and methods to validate a JSON
Web Token (JWT) in an API call to secure access to your APIs.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_addingxsltaction.html">Adding an XSLT action to run a stylesheet for the current payload</a></span><br />
You can use an assembly XSLT action to run a stylesheet for the current payload from the
API context.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_referencingapicontextvariable.html">Accessing and manipulating an API context variable</a></span><br />
You can access and manipulate a referenced API context variable through assembly actions.
The information instructs how to reference a variable in the API context through the assembly
actions.</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="apigw_configuringapi.html" title="The DataPower Gateway stores each API as an API definition configuration. To develop an API, create an API definition.">Developing APIs</a></div>
</div>
<div class="relinfo relconcepts"><strong>Related concepts</strong>:<br />
<div><a class="link" href="apigw_apirequestrouting_apiexecute.html" title="The API Gateway runs the API execute action to execute the assembly rule that is identified at the runtime for the incoming request.">Assembly execution</a></div>
<div><a class="link" href="apigw_apirequestrouting_apiresult.html" title="The API Gateway runs the API result action to prepare responses to the client based on the result from the API execute action.">Response preparation</a></div>
</div>
</div></div></body>
</html>