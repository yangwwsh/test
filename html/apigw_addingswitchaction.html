<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2017" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2017" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Adding a switch action to choose which rule to use" />
<meta name="abstract" content="An assembly switch action evaluates the input context against a list of conditions and runs the corresponding API rule of the first condition that matches. Provide conditions with JavaScript expression and use an &#34;otherwise&#34; clause to run a designated rule when no condition matches." />
<meta name="Description" content="An assembly switch action evaluates the input context against a list of conditions and runs the corresponding API rule of the first condition that matches. Provide conditions with JavaScript expression and use an &#34;otherwise&#34; clause to run a designated rule when no condition matches." />
<meta name="DC.Relation" scheme="URI" content="apigw_configuringassembly.html" />
<meta name="DC.Date" scheme="iso8601" content="2017-05-11" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="apigw_addingswitchaction" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="./ibmdita.css" />
<link rel="Start" href="apigw_configuringassembly.html" />
<title>Adding a switch action to choose which rule to use</title>
</head>
<body id="apigw_addingswitchaction"><div role="main">
<h1 class="title topictitle1">Adding a switch action to choose which rule to use<span class="ph"><img src="./7.6.0.gif" alt="7.6.0" /><img src="./end.gif" alt="" /></span></h1>
<div class="body taskbody"><p class="shortdesc">An assembly switch action evaluates the input context against a list of conditions and
runs the corresponding API rule of the first condition that matches. Provide conditions with
JavaScript expression and use an <span class="q">"otherwise"</span> clause to run a designated rule when no condition
matches.</p>
<div class="section context"><div class="tasklabel"><h2 class="sectiontitle tasklabel" id="taskd1925e22">About this task</h2></div><p class="p">You can define a list of case statements. The order of case statements is important. The case
statements are evaluated in their order and the API rule of the first condition that matches is run.
The designated rule can define further switch actions.</p>

<div class="p">The match condition must evaluate to true for the corresponding rule to run. The following values
evaluate to false, which is also known as falsy values. All other values, including all objects,
evaluate to true.<ul class="ul"><li class="li"><samp class="ph codeph">false</samp></li>
<li class="li"><samp class="ph codeph">undefined</samp></li>
<li class="li"><samp class="ph codeph">null</samp></li>
<li class="li"><samp class="ph codeph">0</samp></li>
<li class="li"><samp class="ph codeph">NaN</samp></li>
<li class="li">The empty string ("")</li>
</ul>
Do not confuse the primitive boolean values <samp class="ph codeph">true</samp> and <samp class="ph codeph">false</samp>
with the true and false values of the Boolean object.</div>

<div class="p">When no condition matches, you can use an <span class="q">"otherwise"</span> clause to define the API rule to run. <ul class="ul"><li class="li">When defined, the designated API rule runs.</li>
<li class="li">When not defined, the <span class="ph">DataPower® Gateway</span> executes the
next action that follows the switch action in the assembly.</li>
</ul>
</div>

<p class="p">When an error occurs during the execution of the selected rule, the transaction is aborted.</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel" id="taskd1925e72">Procedure</h2></div><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">In the search field, enter <kbd class="ph userinput">assembly</kbd>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">From the search results, select <span class="ph uicontrol">Assembly Switch Action</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Add</span> or <span class="ph uicontrol">New</span>.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Define the basic properties: Name, administrative state, and descriptive summary.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Specify a case.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">Add</span> or <span class="ph uicontrol">New</span>.</span></li>
<li class="li substep"><span class="ph cmd">Enter the condition.</span></li>
<li class="li substep"><span class="ph cmd">Specify the API rule to run when the condition matches.</span></li>
<li class="li substep"><span class="ph cmd">Click <span class="ph uicontrol">Apply</span>.</span></li>
</ol>
</li>
<li class="li step stepexpand">Optional: <span class="ph cmd">Repeat the previous step to add another case.</span></li>
<li class="li step stepexpand">Optional: <span class="ph cmd">Specify the API rule to run when no condition matches.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Apply</span> to save the changes to the running configuration.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Click <span class="ph uicontrol">Save Configuration</span> or <span class="ph uicontrol">Save changes</span> to save
the changes to the persisted configuration.</span></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="apigw_configuringassembly.html" title="An assembly defines the data processing capabilities of an API definition. When an API is matched for an API request, the API execute action in the API processing rule runs the assembly of the API to respond to the request. The information instructs how to create an assembly.">Creating an assembly</a></div>
</div>
</div></div></body>
</html>