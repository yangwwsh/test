<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2017" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2017" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="Request processing" />
<meta name="abstract" content="After an API collection is matched, the API Gateway triggers the API processing rule of the collection to match the target API, enforce the constraints to execute the target API operation, prepare the context for the running of the operation, and execute the assembly rule of the API to respond to the request." />
<meta name="Description" content="After an API collection is matched, the API Gateway triggers the API processing rule of the collection to match the target API, enforce the constraints to execute the target API operation, prepare the context for the running of the operation, and execute the assembly rule of the API to respond to the request." />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apirouting.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiclientidentification.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiratelimit.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apisecurity.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apicontext.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiexecute.html" />
<meta name="DC.Relation" scheme="URI" content="apigw_apirequestrouting_apiresult.html" />
<meta name="DC.Date" scheme="iso8601" content="2017-05-11" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="apigw_apirequestrouting_preflow" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="./ibmdita.css" />
<link rel="Start" href="apigw_apirequestrouting.html" />
<title>Request processing</title>
</head>
<body id="apigw_apirequestrouting_preflow"><div role="main">
<h1 class="title topictitle1">Request processing<span class="ph"><img src="./7.6.0.gif" alt="7.6.0" /><img src="./end.gif" alt="" /></span></h1>
<div class="body conbody"><p class="shortdesc">After an API collection is matched, the <span class="ph">API Gateway</span> triggers the API processing rule of the
collection to match the target API, enforce the constraints to execute the target API operation,
prepare the context for the running of the operation, and execute the assembly rule of the API to
respond to the request.</p>
<p class="p">The <span class="ph">API Gateway</span> processes a request by interacting
with the API context. For each transaction, a context is prepared before processing starts and is
continuously updated during the transaction. </p>
<div class="p">As shown in <a class="xref" href="#apigw_apirequestrouting_preflow__api_processing">Figure 1</a>, the <span class="ph">API Gateway</span> uses an API processing rule, which comprises
the following processing actions, to process the request. The <span class="ph">API Gateway</span> achieves each step of the process through
running the corresponding processing action. You can click relevant component in the diagram for
detailed instructions.<ol class="ol"><li class="li">The <span class="ph">API Gateway</span> runs the API routing action to
match the target API to call. When no API is matched, the request is rejected. </li>
<li class="li">The <span class="ph">API Gateway</span> runs the API client identification
action to examine the API key credentials that are carried in the API request and match the API plan
through which the target API is made available to the client.</li>
<li class="li">The <span class="ph">API Gateway</span> runs the API rate limit action to
enforce the rate limit scheme that is configured for the matching API plan. When the rate limit is
reached, the request is rejected.</li>
<li class="li">The <span class="ph">API Gateway</span> runs the API security action to
perform the security checks that are required by the target API and operation. When the security
requirement is not fulfilled, the request is rejected.</li>
<li class="li">The <span class="ph">API Gateway</span> runs the API context action to
populate the context variables for the assembly to access or manipulate.</li>
<li class="li">The <span class="ph">API Gateway</span> runs the API execute action to
execute the assembly of the target API.</li>
<li class="li">The <span class="ph">API Gateway</span> runs the API result action to
prepare the final response to the client based on the result from the API execute action.</li>
</ol>
When error occurs during the API request processing, the <span class="ph">API Gateway</span> runs the API error rule to handle the errors.
A default API error rule comprises only the API result action.<div class="fig fignone" id="apigw_apirequestrouting_preflow__api_processing"><span class="figcap">Figure 1. API request processing flow</span></div>
<div class="fig imagemap" id="apigw_apirequestrouting_preflow__imagemap_apiprocessingrule"><img usemap="#d3920e83" border="0" class="image" src="apiflow.gif" width="930" />
<map name="d3920e83" id="d3920e83">
<area href="apigw_apirequestrouting_apirouting.html" alt="API routing" title="API routing" shape="rect" coords="100, 35, 180, 95" />
<area href="apigw_apirequestrouting_apiclientidentification.html" alt="Client identification" title="Client identification" shape="rect" coords="205, 35, 285, 95" />
<area href="apigw_apirequestrouting_apiratelimit.html" alt="Rate limiting" title="Rate limiting" shape="rect" coords="312, 35, 390, 95" />
<area href="apigw_apirequestrouting_apisecurity.html" alt="Security check" title="Security check" shape="rect" coords="420, 35, 497, 95" />
<area href="apigw_apirequestrouting_apicontext.html" alt="Context population" title="Context population" shape="rect" coords="525, 35, 602, 95" />
<area href="apigw_apirequestrouting_apiexecute.html" alt="Assembly execution" title="Assembly execution" shape="rect" coords="630, 35, 708, 95" />
<area href="apigw_apirequestrouting_apiresult.html" alt="Response preparation" title="Response preparation" shape="rect" coords="740, 35, 818, 95" />
</map></div></div>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apirouting.html">API routing</a></span><br />
The <span class="ph">API Gateway</span> runs the API routing action
to match the API to invoke.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apiclientidentification.html">Client identification</a></span><br />
The <span class="ph">API Gateway</span> runs the API client
identification action to examine the API key credentials that are carried in the request and verify
the subscription of the client. </li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apiratelimit.html">Rate limiting</a></span><br />
The <span class="ph">API Gateway</span> runs the API rate limit
action to enforce the rate limit scheme that is defined for the target API or operation.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apisecurity.html">Security check</a></span><br />
The <span class="ph">API Gateway</span> runs the API security
action to perform the security checks that are required by the matched API on the request. </li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apicontext.html">Context population</a></span><br />
The <span class="ph">API Gateway</span> runs the API context action
to populate the context variables that the assembly actions act on or manipulate at run time. </li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apiexecute.html">Assembly execution</a></span><br />
The <span class="ph">API Gateway</span> runs the API execute action
to execute the assembly rule that is identified at the runtime for the incoming request.</li>
<li class="link ulchildlink"><span class="ulchildlinktext"><a href="apigw_apirequestrouting_apiresult.html">Response preparation</a></span><br />
The <span class="ph">API Gateway</span> runs the API result action
to prepare responses to the client based on the result from the API execute action.</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="apigw_apirequestrouting.html" title="When API Gateway receives an API request through the handlers, the API Gateway first routes the request to a matching API collection. When the collection is matched, the API Gateway triggers the API processing rule of the API collection to execute the required API operation and respond to the API request. The API processing rule comprises a set of API actions in a defined sequence.">Routing of API requests</a></div>
</div>
</div></div></body>
</html>