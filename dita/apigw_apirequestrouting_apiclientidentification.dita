<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE concept PUBLIC "-//OASIS//DTD DITA Concept//EN" "concept.dtd">
<concept id="apigw_apirequestrouting_apiclientidentification" xml:lang="en-us">
<title>Client identification<ph rev="rev760"/></title>
<shortdesc>The <ph conref="apigw_conref.dita#common/apigw"/> runs the API client
identification action to examine the API key credentials that are carried in the request and verify
the subscription of the client. </shortdesc>
<conbody>
<p>
<ol>
<li>The API client identification action examines the API key credentials that are carried in the
request against the API key security requirement of the target API. <ul>
<li>When the API does not have any security requirement or the API does not have any API key
security requirement, the processing proceeds directly to the rate limiting phase.</li>
<li>When the API has an API key security requirement, the request must meet the following conditions
to pass the client identification check:<ul>
<li>The API key credentials must be placed in the location that is expected by the API key security
requirement.</li>
<li>When the API key security requirement requires the client ID, the request must carry the client
ID in the expected location.</li>
<li>When the API key security requirement requires the client ID and secret, the request must carry
the client ID and secret in the expected location.</li>
</ul>The request is rejected when client identification fails.</li>
</ul></li>
<li>After the API key credentials pass the client identification check, the API client
identification action checks whether an API subscriber exists in the <ph
conref="apigw_conref.dita#common/apigw"/> by matching the client ID and secret.<ul>
<li>If a subscriber is matched, the API client identification action retrieves the plans that the
subscriber is subscribed to:<ul>
<li>If the target API is packaged in at least one of the subscribed plans, the action saves the
matched plan to be used in the rate limiting phase.</li>
<li>If the target API is not packaged in any of the subscribed plans, the request is rejected.</li>
</ul></li>
<li>If no subscriber is matched, the request is rejected.</li>
</ul></li>
</ol>
</p>
</conbody>
</concept>
